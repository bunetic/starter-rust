<!DOCTYPE html>
<html>
<head>
    <title>Rust Backend Demo</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body>
    <h1>Rust Backend Demo</h1>
    
    <h2>Health Status</h2>
    <button onclick="checkHealth()">Check Health</button>
    <span id="healthStatus">Unknown</span>
    <pre id="healthResponse"></pre>
    
    <h2>Ping Pong Test</h2>
    <button onclick="sendPing()">Send Ping</button>
    <span id="pingStatus">Ready</span>
    <pre id="pingResponse"></pre>

    <script>
        window.onload = function() {
            checkHealth();
        };

        async function checkHealth() {
            const status = document.getElementById('healthStatus');
            const response = document.getElementById('healthResponse');
            
            status.textContent = 'Checking...';
            
            const startTime = Date.now();
            
            try {
                const res = await fetch('/health');
                const data = await res.json();
                const endTime = Date.now();
                const timeDiff = endTime - startTime;
                
                status.textContent = 'Healthy';
                response.textContent = JSON.stringify(data, null, 2) + '\n\nResponse Time: ' + timeDiff + 'ms';
                    
            } catch (error) {
                const endTime = Date.now();
                const timeDiff = endTime - startTime;
                
                status.textContent = 'Error';
                response.textContent = 'Error: ' + error.message + '\n\nFailed after: ' + timeDiff + 'ms';
            }
        }

        async function sendPing() {
            const status = document.getElementById('pingStatus');
            const response = document.getElementById('pingResponse');
            
            status.textContent = 'Pinging...';
            
            const startTime = Date.now();
            
            try {
                const res = await fetch('/ping');
                const data = await res.json();
                const endTime = Date.now();
                const timeDiff = endTime - startTime;
                
                status.textContent = 'Pong! (' + timeDiff + 'ms)';
                response.textContent = JSON.stringify(data, null, 2) + '\n\nPing â†’ Pong Time: ' + timeDiff + 'ms';
                    
            } catch (error) {
                const endTime = Date.now();
                const timeDiff = endTime - startTime;
                
                status.textContent = 'Failed (' + timeDiff + 'ms)';
                response.textContent = 'Error: ' + error.message + '\n\nFailed after: ' + timeDiff + 'ms';
            }
        }
    </script>
</body>
</html>
